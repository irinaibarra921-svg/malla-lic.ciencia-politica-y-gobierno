<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Malla Curricular - Ciencia Política UNLa</title>
  <style>
    body {
      font-family: "Americana BT", sans-serif;
      background-color: #ffffff;
      margin: 0;
      padding: 2rem;
      color: #333;
    }

    h1 {
      text-align: center;
      color: #70C289;
    }

    .container {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 2rem;
    }

    .year-column {
      flex: 1 1 220px;
      background-color: #f8f8f8;
      border: 2px solid #70C289;
      border-radius: 12px;
      padding: 1rem;
      box-shadow: 2px 2px 10px rgba(0,0,0,0.05);
    }

    .year-column h2 {
      color: #70C289;
      font-size: 1.2rem;
      border-bottom: 1px solid #ccc;
      padding-bottom: 0.5rem;
    }

    .subject {
      margin: 0.5rem 0;
      padding: 0.5rem;
      border-radius: 6px;
      background-color: #eafaf0;
      cursor: pointer;
      transition: background-color 0.2s;
      position: relative;
    }

    .subject.locked {
      background-color: #f0f0f0;
      color: #aaa;
      cursor: not-allowed;
    }

    .subject:hover:not(.locked) {
      background-color: #d4f5e0;
    }

    .subject.approved {
      background-color: #70C289;
      color: white;
      text-decoration: line-through;
    }

    .subject[data-tooltip]:hover::after {
      content: attr(data-tooltip);
      position: absolute;
      left: 100%;
      top: 0;
      background: #444;
      color: #fff;
      padding: 5px 8px;
      font-size: 0.8rem;
      white-space: pre;
      border-radius: 4px;
      z-index: 10;
      margin-left: 5px;
    }
  </style>
</head>
<body>
  <h1>Malla Curricular - Ciencia Política y Gobierno (UNLa)</h1>
  <div class="container" id="curriculum">
    <!-- Las columnas y materias se generan dinámicamente -->
  </div>

  <script>
    const materiasPorAnio = {
      "1° Año": [
        "Sociología política",
        "Fundamentos de Ciencia Política",
        "Economía Política",
        "Historia moderna y contemporánea",
        "Instituciones del derecho",
        "Seminario del Pensamiento Nacional y Latinoamericano",
        "Estadística social",
        "Teoría Política I"
      ],
      "2° Año": [
        "Metodología de la Investigación Social I",
        "Teoría Política II",
        "Derecho Constitucional",
        "Fundamentos de Macroeconomía",
        "Historia política y social latinoamericana",
        "Metodología de la Investigación Social II",
        "Teoría del Estado",
        "Economía internacional",
        "Historia política y social argentina",
        "Taller de práctica pre-profesional 1°etapa"
      ],
      "3° Año": [
        "Política internacional",
        "Análisis de la sociedad argentina",
        "Derecho administrativo",
        "Teoría política contemporánea",
        "Administración Pública",
        "Economía de gobierno y finanzas públicas",
        "Gobierno local",
        "Políticas públicas"
      ],
      "4° Año": [
        "Análisis político y opinión pública",
        "Seminario de Justicia y Derechos Humanos",
        "Planificación estratégica y análisis de políticas públicas",
        "Formulación y evaluación de proyectos",
        "Ideas políticas en América Latina",
        "Política comparada",
        "Politica Latinoamericana",
        "Comunicación política",
        "Taller de trabajo final integrador"
      ],
      "Módulos/Seminarios": [
        "Seminario optativo I",
        "Seminario optativo II",
        "Informática Módulo 2: Procesador de textos",
        "Informática Módulo 7: Sistemas de información geográfica",
        "Informática Módulo 11: Progama estadístico para las Ciencias Sociales 1",
        "Informática Módulo 12: Programa estadístico para las Ciencias Sociales 2",
        "Inglés I",
        "Inglés II",
        "Inglés III"
      ]
    };

    const correlatividades = {
      "Teoría Política I": ["Fundamentos de Ciencia Política"],
      "Teoría Política II": ["Teoría Política I"],
      "Teoría política contemporánea": ["Teoría Política II"],
      "Teoría del Estado": ["Fundamentos de Ciencia Política"],
      "Política internacional": ["Teoría del Estado"],
      "Administración Pública": ["Teoría del Estado"],
      "Estadística social": ["Metodología de la Investigación Social I"],
      "Metodología de la Investigación Social II": ["Metodología de la Investigación Social I"],
      "Taller de práctica pre-profesional 1°etapa": ["Metodología de la Investigación Social II"],
      "Derecho Constitucional": ["Instituciones del derecho"],
      "Gobierno local": ["Derecho Constitucional"],
      "Seminario de Justicia y Derechos Humanos": ["Derecho Constitucional"],
      "Derecho administrativo": ["Instituciones del derecho"],
      "Economía internacional": ["Economía Política"],
      "Economía de gobierno y finanzas públicas": ["Economía internacional"],
      "Historia política y social latinoamericana": ["Historia moderna y contemporánea"],
      "Historia política y social argentina": ["Historia política y social latinoamericana"],
      "Análisis de la sociedad argentina": ["Historia política y social argentina"],
      "Ideas políticas en América Latina": ["Análisis de la sociedad argentina"],
      "Políticas públicas": ["Administración Pública"],
      "Planificación estratégica y análisis de políticas públicas": ["Políticas públicas"],
      "Formulación y evaluación de proyectos": ["Administración Pública"],
      "Política comparada": ["Teoría política contemporánea"],
      "Politica Latinoamericana": ["Planificación estratégica y análisis de políticas públicas"],
      "Comunicación política": ["Análisis político y opinión pública"],
      "Análisis político y opinión pública": ["Teoría política contemporánea"],
      "Seminario optativo II": ["Seminario optativo I"],
      "Informática Módulo 7: Sistemas de información geográfica": ["Informática Módulo 2: Procesador de textos"],
      "Informática Módulo 11: Progama estadístico para las Ciencias Sociales 1": ["Informática Módulo 7: Sistemas de información geográfica"],
      "Informática Módulo 12: Programa estadístico para las Ciencias Sociales 2": ["Informática Módulo 11: Progama estadístico para las Ciencias Sociales 1"],
      "Inglés II": ["Inglés I"],
      "Inglés III": ["Inglés II"],
      "Taller de trabajo final integrador": Object.values(materiasPorAnio)
        .flat()
        .filter(m => m !== "Taller de trabajo final integrador")
    };

    const aprobadas = JSON.parse(localStorage.getItem("materiasAprobadas") || "[]");

    function crearMalla() {
      const container = document.getElementById("curriculum");
      container.innerHTML = "";

      for (const [anio, materias] of Object.entries(materiasPorAnio)) {
        const col = document.createElement("div");
        col.className = "year-column";
        col.innerHTML = `<h2>${anio}</h2>`;

        materias.forEach(materia => {
          const div = document.createElement("div");
          div.className = "subject";
          div.textContent = materia;

          const requisitos = correlatividades[materia] || [];

          const aprobadasTodas = requisitos.every(r => aprobadas.includes(r));
          if (!aprobadasTodas) {
            div.classList.add("locked");
            div.setAttribute("data-tooltip", "Requiere:\n" + requisitos.join("\n"));
          } else {
            div.addEventListener("click", () => toggleAprobada(materia));
          }

          if (aprobadas.includes(materia)) {
            div.classList.add("approved");
          }

          col.appendChild(div);
        });

        container.appendChild(col);
      }
    }

    function toggleAprobada(materia) {
      const index = aprobadas.indexOf(materia);
      if (index >= 0) {
        aprobadas.splice(index, 1);
      } else {
        aprobadas.push(materia);
      }
      localStorage.setItem("materiasAprobadas", JSON.stringify(aprobadas));
      crearMalla();
    }

    crearMalla();
  </script>
</body>
</html>
