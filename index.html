<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Malla Curricular Ciencia Política - UNLa</title>
  <style>
    body {
      font-family: Helvetica, sans-serif;
      background: #ffffff;
      margin: 0;
      padding: 20px;
      color: #333;
    }
    h1 {
      text-align: center;
      color: #2e7d32;
    }
    .year {
      margin-bottom: 40px;
    }
    .year h2 {
      background: #a5d6a7;
      color: #1b5e20;
      padding: 10px;
      border-radius: 5px;
    }
    .grid {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
    }
    .subject {
      padding: 10px;
      border: 2px solid #a5d6a7;
      border-radius: 5px;
      background: #e8f5e9;
      cursor: pointer;
      width: 200px;
      transition: background 0.3s, border 0.3s;
      position: relative;
    }
    .subject.locked {
      background: #f0f0f0;
      border: 2px dashed #ccc;
      color: #aaa;
      cursor: not-allowed;
    }
    .subject:hover .tooltip {
      visibility: visible;
      opacity: 1;
    }
    .tooltip {
      visibility: hidden;
      opacity: 0;
      background-color: #333;
      color: #fff;
      text-align: center;
      padding: 5px 8px;
      border-radius: 4px;
      position: absolute;
      z-index: 1;
      bottom: 125%;
      left: 50%;
      transform: translateX(-50%);
      transition: opacity 0.3s;
      white-space: nowrap;
    }
    .subject.approved {
      background: #c8e6c9;
      border-color: #388e3c;
      color: #2e7d32;
      font-weight: bold;
    }
  </style>
</head>
<body>
  <h1>Malla Curricular - Ciencia Política y Gobierno (UNLa)</h1>

  <div id="malla"></div>

  <script>
    const subjects = {
      "Primer año": [
        "Sociología política",
        "Fundamentos de Ciencia Política",
        "Economía Política",
        "Historia moderna y contemporánea",
        "Instituciones del derecho",
        "Seminario del Pensamiento Nacional y Latinoamericano",
        "Estadística social",
        "Teoría Política I"
      ],
      "Segundo año": [
        "Metodología de la investigación social I",
        "Teoría Política II",
        "Derecho Constitucional",
        "Fundamentos de Macroeconomía",
        "Historia política y social latinoamericana",
        "Metodología de la Investigación Social II",
        "Teoría del Estado",
        "Economía internacional",
        "Historia política y social argentina",
        "Taller de práctica pre-profesional 1 etapa"
      ],
      "Tercer año": [
        "Política internacional",
        "Análisis de la sociedad argentina",
        "Derecho administrativo",
        "Teoría política contemporánea",
        "Administración Pública",
        "Economía de gobierno y finanzas públicas",
        "Gobierno local",
        "Políticas públicas"
      ],
      "Cuarto año": [
        "Análisis político y opinión pública",
        "Seminario de Justicia y Derechos Humanos",
        "Planificación estratégica y análisis de políticas públicas",
        "Formulación y evaluación de proyectos",
        "Ideas políticas en América Latina",
        "Política comparada",
        "Politica Latinoamericana",
        "Comunicación política",
        "Taller de trabajo final integrador"
      ]
    };

    const correlatividades = {
      "Teoría Política I": ["Fundamentos de Ciencia Política"],
      "Estadística social": ["Metodología de la investigación social I"],
      "Derecho Constitucional": ["Instituciones del derecho"],
      "Historia política y social latinoamericana": ["Historia moderna y contemporánea"],
      "Metodología de la Investigación Social II": ["Metodología de la investigación social I"],
      "Teoría del Estado": ["Fundamentos de Ciencia Política"],
      "Economía internacional": ["Economía Política"],
      "Historia política y social argentina": ["Historia política y social latinoamericana"],
      "Taller de práctica pre-profesional 1 etapa": ["Metodología de la investigación social I"],
      "Política internacional": ["Teoría del Estado"],
      "Análisis de la sociedad argentina": ["Historia política y social argentina"],
      "Derecho administrativo": ["Instituciones del derecho"],
      "Teoría política contemporánea": ["Teoría Política II"],
      "Administración Pública": ["Teoría del Estado"],
      "Economía de gobierno y finanzas públicas": ["Economía internacional"],
      "Gobierno local": ["Derecho Constitucional"],
      "Políticas públicas": ["Administración Pública"],
      "Análisis político y opinión pública": ["Teoría política contemporánea"],
      "Seminario de Justicia y Derechos Humanos": ["Derecho Constitucional"],
      "Planificación estratégica y análisis de políticas públicas": ["Políticas públicas"],
      "Formulación y evaluación de proyectos": ["Administración Pública"],
      "Ideas políticas en América Latina": ["Análisis de la sociedad argentina"],
      "Política comparada": ["Teoría política contemporánea"],
      "Politica Latinoamericana": ["Planificación estratégica y análisis de políticas públicas"],
      "Comunicación política": ["Análisis político y opinión pública"]
    };

    const approved = JSON.parse(localStorage.getItem("materias_aprobadas") || "[]");

    const malla = document.getElementById("malla");

    function crearMalla() {
      Object.entries(subjects).forEach(([año, materias]) => {
        const cont = document.createElement("div");
        cont.className = "year";
        cont.innerHTML = `<h2>${año}</h2>`;

        const grid = document.createElement("div");
        grid.className = "grid";

        materias.forEach((materia) => {
          const div = document.createElement("div");
          div.className = "subject";
          div.textContent = materia;
          const tooltip = document.createElement("div");
          tooltip.className = "tooltip";
          div.appendChild(tooltip);

          div.updateState = () => {
            const reqs = correlatividades[materia] || [];
            const ready = reqs.every((r) => approved.includes(r));
            const isAprob = approved.includes(materia);

            div.classList.remove("locked", "approved");
            if (isAprob) {
              div.classList.add("approved");
            } else if (!ready) {
              div.classList.add("locked");
              tooltip.textContent = "Falta: " + reqs.filter((r) => !approved.includes(r)).join(", ");
            }

            div.onclick = () => {
              if (!ready && !isAprob) return;
              if (isAprob) approved.splice(approved.indexOf(materia), 1);
              else approved.push(materia);
              localStorage.setItem("materias_aprobadas", JSON.stringify(approved));
              actualizarMalla();
            };
          };

          div.updateState();
          grid.appendChild(div);
        });

        cont.appendChild(grid);
        malla.appendChild(cont);
      });
    }

    function actualizarMalla() {
      document.querySelectorAll(".subject").forEach((div) => div.updateState?.());
    }

    crearMalla();
  </script>
</body>
</html>

