<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Malla Curricular - Ciencia Política y Gobierno</title>
  <style>
    body {
      font-family: 'Americana BT', Helvetica, sans-serif;
      background-color: white;
      color: #333;
      margin: 0;
      padding: 20px;
    }
    h2 {
      color: #70C289;
    }
    .container {
      display: flex;
      gap: 20px;
      flex-wrap: wrap;
    }
    .year {
      flex: 1;
      min-width: 250px;
    }
    .subject {
      background: #f9f9f9;
      border: 2px solid #ccc;
      border-left: 10px solid #70C289;
      margin: 5px 0;
      padding: 10px;
      border-radius: 8px;
      cursor: pointer;
      position: relative;
      transition: background 0.2s;
    }
    .subject:hover {
      background: #eefaf2;
    }
    .subject.locked {
      background: #eee;
      border-color: #bbb;
      cursor: not-allowed;
    }
    .subject.locked:hover::after {
      content: attr(data-tooltip);
      position: absolute;
      left: 100%;
      top: 0;
      background: #70C289;
      color: white;
      padding: 5px;
      font-size: 12px;
      white-space: nowrap;
      border-radius: 5px;
      margin-left: 10px;
      z-index: 10;
    }
    .subject.completed {
      text-decoration: line-through;
      opacity: 0.6;
    }
  </style>
</head>
<body>
  <h1>Malla Curricular - Ciencia Política y Gobierno</h1>
  <div class="container" id="malla"></div>

  <script>
    const materiasPorAnio = {
      'Primer año': [
        "Sociología política",
        "Fundamentos de Ciencia Política",
        "Economía Política",
        "Historia moderna y contemporánea",
        "Instituciones del derecho",
        "Seminario del Pensamiento Nacional y Latinoamericano",
        "Estadística social",
        "Teoría Política I"
      ],
      'Segundo año': [
        "Metodología de la investigación social I",
        "Teoría Política II",
        "Derecho Constitucional",
        "Fundamentos de Macroeconomía",
        "Historia política y social latinoamericana",
        "Metodología de la Investigación Social II",
        "Teoría del Estado",
        "Economía internacional",
        "Historia política y social argentina",
        "Taller de práctica pre-profesional 1°etapa"
      ],
      'Tercer año': [
        "Política internacional",
        "Análisis de la sociedad argentina",
        "Derecho administrativo",
        "Teoría política contemporánea",
        "Administración Pública",
        "Economía de gobierno y finanzas públicas",
        "Gobierno local",
        "Políticas públicas"
      ],
      'Cuarto año': [
        "Análisis político y opinión pública",
        "Seminario de Justicia y Derechos Humanos",
        "Planificación estratégica y análisis de políticas públicas",
        "Formulación y evaluación de proyectos",
        "Ideas políticas en América Latina",
        "Política comparada",
        "Politica Latinoamericana",
        "Comunicación política",
        "Taller de trabajo final integrador"
      ],
      'Módulos/Seminarios': [
        "Seminario optativo I",
        "Seminario optativo II",
        "Informática Módulo 2: Procesador de textos",
        "Informática Módulo 7: Sistemas de información geográfica",
        "Informática Módulo 11: Progama estadístico para las Ciencias Sociales 1",
        "Informática Módulo 12: Programa estadístico para las Ciencias Sociales 2",
        "Inglés I",
        "Inglés II",
        "Inglés III"
      ]
    };

    const correlatividades = {
      "Fundamentos de Ciencia Política": ["Teoría Política I", "Teoría del Estado"],
      "Teoría Política I": ["Teoría Política II"],
      "Estadística social": ["Metodología de la investigación social I"],
      "Metodología de la investigación social I": ["Metodología de la Investigación Social II"],
      "Metodología de la Investigación Social II": ["Taller de práctica pre-profesional 1°etapa"],
      "Instituciones del derecho": ["Derecho Constitucional", "Derecho administrativo"],
      "Historia moderna y contemporánea": ["Historia política y social latinoamericana"],
      "Historia política y social latinoamericana": ["Historia política y social argentina"],
      "Historia política y social argentina": ["Análisis de la sociedad argentina"],
      "Economía política": ["Economía internacional"],
      "Economía internacional": ["Economía de gobierno y finanzas públicas"],
      "Teoría del Estado": ["Política internacional", "Administración Pública"],
      "Teoría Política II": ["Teoría política contemporánea"],
      "Derecho Constitucional": ["Gobierno local", "Seminario de Justicia y Derechos Humanos"],
      "Administración Pública": ["Políticas públicas", "Formulación y evaluación de proyectos"],
      "Políticas públicas": ["Planificación estratégica y análisis de políticas públicas"],
      "Planificación estratégica y análisis de políticas públicas": ["Política latinoamericana"],
      "Análisis de la sociedad argentina": ["Ideas políticas en América Latina"],
      "Teoría política contemporánea": ["Análisis político y opinión pública", "Política comparada"],
      "Análisis político y opinión pública": ["Comunicación política"],
      "Seminario optativo I": ["Seminario optativo II"],
      "Informática Módulo 2: Procesador de textos": ["Informática Módulo 7: Sistemas de información geográfica"],
      "Informática Módulo 7: Sistemas de información geográfica": ["Informática Módulo 11: Progama estadístico para las Ciencias Sociales 1"],
      "Informática Módulo 11: Progama estadístico para las Ciencias Sociales 1": ["Informática Módulo 12: Programa estadístico para las Ciencias Sociales 2"],
      "Inglés I": ["Inglés II"],
      "Inglés II": ["Inglés III"],
      "Taller de trabajo final integrador": Object.values(materiasPorAnio).slice(0, 4).flat()
    };

    const estado = JSON.parse(localStorage.getItem("estadoMaterias")) || {};

    function crearMalla() {
      const contenedor = document.getElementById("malla");
      contenedor.innerHTML = "";

      for (const [anio, materias] of Object.entries(materiasPorAnio)) {
        const columna = document.createElement("div");
        columna.className = "year";

        const titulo = document.createElement("h2");
        titulo.textContent = anio;
        columna.appendChild(titulo);

        for (const materia of materias) {
          const div = document.createElement("div");
          div.className = "subject";
          div.textContent = materia;

          const requisitos = Object.entries(correlatividades)
            .filter(([req, dependientes]) => dependientes.includes(materia))
            .map(([req]) => req);

          const bloqueada = requisitos.some(req => !estado[req]);

          if (bloqueada) {
            div.classList.add("locked");
            div.dataset.tooltip = "Requiere: " + requisitos.filter(r => !estado[r]).join(", ");
          } else {
            div.addEventListener("click", () => {
              estado[materia] = !estado[materia];
              localStorage.setItem("estadoMaterias", JSON.stringify(estado));
              crearMalla();
            });
          }

          if (estado[materia]) {
            div.classList.add("completed");
          }

          columna.appendChild(div);
        }
        contenedor.appendChild(columna);
      }
    }

    crearMalla();
  </script>
</body>
</html>
